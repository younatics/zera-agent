# PROMPT OPTIMIZATION TASK

## 1. TASK CONTEXT
Task Type: 
{task_type}

Task Description:
{task_description}

## 2. PERFORMANCE ANALYSIS
Review these cases carefully:
{random_cases}

- Check if the prompt aligns with the expected output structure
- Detect any formatting mismatch
- Consider whether the prompt clearly instructs the model to produce only the expected format
- Identify missing constraints that could improve output alignment
- Carefully study the Expected Output examples to infer required structural patterns, format constraints, and brevity expectations.
- When analyzing cases, prioritize extracting generalizable structural rules (e.g., output length, formatting style, section headings) from both successful and failed samples.
- If score improvements stagnate, attempt a structural innovation based on observed patterns, ensuring alignment with the Expected Output requirements.
- Focus on enforcing concrete output format instructions (e.g., number of bullet points, sentence limits, required headers) explicitly within the generated prompts.

## 3. PROMPT REVIEW
Recent Prompt History:
{recent_prompts}

Best Performing Prompt:
{formatted_best_prompt}

Current System Prompt:
{system_prompt}

Current User Prompt:
{user_prompt}

## 4. IMPROVEMENT TASK
- Your goal is to generate improved system and user prompts that reflect the task requirements, including any formatting constraints. If the task requires a fixed output structure, enforce this strictly in the prompt. Ensure all outputs will comply with the expected output format and that prompts are as concise, direct, and task-aligned as possible.
- If the evaluation scores appear to be declining or stagnating, you are encouraged to attempt a structural innovation. Don't hesitate to try a new format, omit less critical content, or adopt a more compressed and abstract style if appropriate. The goal is to break free from repetitive patterns and explore sharper, more efficient prompt designs.

## 5. OUTPUT FORMAT
TASK_TYPE:
[Main task type] ([Sub-task type])

TASK_DESCRIPTION:
[Enhanced task description with clear output requirements]

SYSTEM_PROMPT:
[Optimized system prompt]

USER_PROMPT:
[Optimized user prompt]