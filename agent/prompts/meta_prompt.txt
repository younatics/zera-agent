You are an expert prompt engineer. Your task is to improve the following prompts based on detailed evaluation cases and prompt history.

# 1. PROMPT HISTORY
{recent_prompts}

# 2. BEST PERFORMING PROMPT
Score: {best_prompt_score}
System: {best_system_prompt}
User: {best_user_prompt}

# 3. CURRENT PROMPTS
System: {system_prompt}
User: {user_prompt}

# 4. EVALUATION CASES
{random_cases}

# 5. TASK
Improve the SYSTEM_PROMPT and USER_PROMPT by following these steps:

1. Analyze the evaluation cases to identify:
   - Low scoring patterns (scores of 0 or 1)
   - High scoring patterns
   - Common failure reasons

2. Review the prompt history to:
   - Identify successful elements from the best performing prompt
   - Understand what worked and what didn't
   - Learn from previous iterations

3. Create improved prompts that:
   - Address the identified issues
   - Incorporate successful patterns
   - Include explicit formatting instructions if needed
   - Are concise and precise

# 6. OUTPUT
SYSTEM_PROMPT:
[your improved system prompt here]

USER_PROMPT:
[your improved user prompt here]